(()=>{var e={565:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var r=i(761),n=i.n(r);function o(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.port=t,this.PANEL_ELEMENTS=[],this.TWITTER_FEED_CHILD_NODE=null,this.feedIntervalId=0,this.pageInterval=0,this.initialLoad=!1,this.TWITTER_FEED_FRAME_HEIGHT="1000px",this.TWITTER_FEED_FRAME_WIDTH="598px",this.TWITTER_PANEL_FRAME_HEIGHT="4000px",this.TWITTER_PANEL_FRAME_WIDTH="350px",this.IFRAME_ClASS="focus-card";var i=this.initIframeTwitter();this.feedIframe=i[0],this.panelIframe=i[1],this.twitterBlockingAttempts=0}var t,i,r;return t=e,(i=[{key:"initIframeTwitter",value:function(){var e=document.createElement("iframe"),t=document.createElement("iframe");return e.width=this.TWITTER_FEED_FRAME_WIDTH,e.height=this.TWITTER_FEED_FRAME_HEIGHT,e.className=this.IFRAME_ClASS,t.width=this.TWITTER_PANEL_FRAME_WIDTH,t.height=this.TWITTER_PANEL_FRAME_HEIGHT,t.className=this.IFRAME_ClASS,Object.assign(e.style,{position:"fixed",border:"none"}),Object.assign(t.style,{position:"fixed",border:"none"}),[e,t]}},{key:"clearPanelElements",value:function(){this.PANEL_ELEMENTS=[]}},{key:"focusTwitterPanel",value:function(){this.pageInterval=setInterval(this.tryBlockingTwitterPanel.bind(this),700)}},{key:"setFeedIframeSource",value:function(){"rgb(0, 0, 0)"==document.body.style.backgroundColor?this.feedIframe.src=chrome.runtime.getURL("www/twitter/feed/twitterFeedDark.html"):"rgb(21, 32, 43)"==document.body.style.backgroundColor?this.feedIframe.src=chrome.runtime.getURL("www/twitter/feed/twitterFeedDim.html"):this.feedIframe.src=chrome.runtime.getURL("www/twitter/feed/twitterFeed.html")}},{key:"setPanelIframeSource",value:function(){"rgb(0, 0, 0)"==document.body.style.backgroundColor||"rgb(21, 32, 43)"==document.body.style.backgroundColor?this.panelIframe.src=chrome.runtime.getURL("www/twitter/panel/twitterPanelDark.html"):this.panelIframe.src=chrome.runtime.getURL("www/twitter/panel/twitterPanel.html")}},{key:"focusTwitter",value:function(){this.initialLoad?this.feedIntervalId=setInterval(this.tryBlockingTwitterHome.bind(this),100):(this.feedIntervalId=setInterval(this.tryBlockingTwitterHome.bind(this),500),this.initialLoad=!this.initialLoad)}},{key:"toggleTwitterHomeDistractions",value:function(e){e?(this.hideTwitterFeed(!0),this.hideTwitterPanel(!0),this.injectCards("home")):(this.hideTwitterFeed(!1),this.hideTwitterPanel(!1))}},{key:"hideTwitterFeed",value:function(e){var t=n().getTwitterFeed();e?(this.TWITTER_FEED_CHILD_NODE=t.children[0],t.removeChild(t.childNodes[0])):t.append(this.TWITTER_FEED_CHILD_NODE)}},{key:"hideTwitterPanel",value:function(e){var t=n().getTwitterPanel();if(e){for(var i=t.children.length;1!=i;){var r=t.lastChild;this.PANEL_ELEMENTS.push(r),t.removeChild(r),i-=1}this.injectCards("panel")}else{for(var o=0;o<this.PANEL_ELEMENTS.length;o+=1)t.append(this.PANEL_ELEMENTS[o]);this.clearPanelElements()}}},{key:"tryBlockingTwitterHome",value:function(){try{if(this.distractionsHidden("home"))return clearInterval(this.feedIntervalId),void(this.initialLoad=!1);this.toggleTwitterHomeDistractions(!0)}catch(e){this.blockAttemptCount+=1,this.blockAttemptCount>2?n().sendLogToBackground(this.port,"WARNING: Twitter elements usually load by now"):this.blockAttemptCount>4&&this.blockAttemptCount<8?n().sendLogToBackground(this.port,"ERROR: Something Wrong with the twitter elements"):clearInterval(this.pageInterval)}}},{key:"tryBlockingTwitterPanel",value:function(){try{if(this.distractionsHidden("panel"))return void clearInterval(this.pageInterval);this.hideTwitterPanel(!0)}catch(e){this.blockAttemptCount+=1,this.blockAttemptCount>2?n().sendLogToBackground(this.port,"WARNING: Twitter elements usually load by now"):this.blockAttemptCount>4&&this.blockAttemptCount<8?n().sendLogToBackground(this.port,"ERROR: Something Wrong with the twitter elements"):clearInterval(this.pageInterval)}}},{key:"distractionsHidden",value:function(e){var t=n().getTwitterPanel();return"home"==e?"IFRAME"==n().getTwitterFeed().children[0].nodeName&&2==t.children.length:2==t.children.length}},{key:"injectCards",value:function(e){this.setPanelIframeSource(),"home"==e&&(this.setFeedIframeSource(),n().getTwitterFeed().append(this.feedIframe)),n().getTwitterPanel().append(this.panelIframe)}}])&&o(t.prototype,i),r&&o(t,r),e}()},761:e=>{function t(){return document.querySelectorAll('[role="main"]')[0].children[0].children[0].children[0].children[0].children[0].children[3]}function i(){return document.querySelectorAll('[role="main"]')[0].children[0].children[0].children[0].children[1].children[0].children[1].children[0].children[0].children[0]}e.exports={homePageTwitterHasLoaded:function(){return i()&&t()},getTwitterFeedClassName:function(){var e=t();if(null!=e)return e.className;throw"feed class name not found!"},hasTwitterPanelLoaded:function(){var e=i();return 5==e.children.length||2==e.children.length},getTwitterPanel:i,getTwitterFeed:t,sendLogToBackground:function(e,t){e.postMessage({event:"log",log:t})}}}},t={};function i(r){var n=t[r];if(void 0!==n)return n.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,i),o.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e,t,r=i(565),n=i(761),o=i.n(n);function a(e){var i=e.status,r=e.method,n=e.url;"focus"==i?n.includes("twitter")&&(t.clearPanelElements(),"initial"==r?t.focusTwitter():"hidePanels"==r?t.focusTwitterPanel():t.toggleTwitterHomeDistractions(!0)):"unfocus"==e.status&&n.includes("twitter")&&(n.includes("/home")?(l(),t.toggleTwitterHomeDistractions(!1)):t.hideTwitterPanel(!1),l())}function l(){try{var t=document.getElementsByClassName("focus-card");Array.prototype.forEach.call(t,(function(e){e.remove()}))}catch(t){o().sendLogToBackground(e,"CURRENTLY NO IFRAMES ON THE SCREEN")}}(e=chrome.runtime.connect({name:"Focused Browsing"})).onMessage.addListener(a),o().sendLogToBackground(e,"USER SESSION STARTED"),t=new r.Z(e)})()})();